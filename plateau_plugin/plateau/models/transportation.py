"""交通モデル (道路、鉄道、徒歩道、広場、航路)"""

from .base import (
    FeatureEmission,
    FeatureEmissions,
    FeatureProcessingDefinition,
    LODDetection,
    Property,
    PropertyGroup,
)

ROAD = FeatureProcessingDefinition(
    id="Road",
    target_elements=["tran:Road"],
    lod_detection=LODDetection(
        lod1=["./tran:lod1MultiSurface"],
        lod2=["./tran:lod2MultiSurface"],
        lod3=["./tran:lod3MultiSurface"],
        lod4=["./tran:lod4MultiSurface"],
    ),
    property_groups=[
        PropertyGroup(
            base_element=None,
            properties=[
                Property(
                    name="class",
                    path="./tran:class",
                    datatype="string",
                    codelist="TransportationComplex_class",
                ),
                Property(
                    name="function",
                    path="./tran:function",
                    datatype="[]string",
                    codelist="Road_function",
                ),
                Property(
                    name="usage",
                    path="./tran:usage",
                    datatype="[]string",
                    codelist="Road_usage",
                ),
            ],
        ),
        # uro:RoadDataQualityAttribute
        PropertyGroup(
            base_element="./uro:roadDataQualityAttribute/uro:RoadDataQualityAttribute",
            properties=[
                Property(
                    name="uro:srcScale",
                    path="./uro:srcScale",
                    datatype="[]string",
                    codelist="RoadDataQualityAttribute_srcScale",
                ),
                Property(
                    name="uro:geometrySrcDesc",
                    path="./uro:geometrySrcDesc",
                    datatype="[]string",
                    codelist="RoadDataQualityAttribute_geometrySrcDesc",
                ),
                Property(
                    name="uro:thematicSrcDesc",
                    path="./uro:thematicSrcDesc",
                    datatype="[]string",
                    codelist="RoadDataQualityAttribute_thematicSrcDesc",
                ),
                Property(
                    name="uro:appearanceSrcDesc",
                    path="./uro:appearanceSrcDesc",
                    datatype="[]string",
                    codelist="RoadDataQualityAttribute_appearanceSrcDesc",
                ),
                Property(
                    name="uro:lodType",
                    path="./uro:appearanceSrcDesc",
                    datatype="[]string",
                    codelist="Road_lodType",
                ),
            ],
        ),
        # uro:RoadStructureAttribute
        PropertyGroup(
            base_element="./uro:roadStructureAttribute/uro:RoadStructureAttribute",
            properties=[
                Property(
                    name="uro:width",
                    path="./uro:width",
                    datatype="double",
                ),
                Property(
                    name="uro:widthType",
                    path="./uro:widthType",
                    datatype="string",
                    codelist="RoadStructureAttribute_widthType",
                ),
                Property(
                    name="uro:numberOfLanes",
                    path="./uro:numberOfLanes",
                    datatype="integer",
                ),
                Property(
                    name="uro:sectionType",
                    path="./uro:sectionType",
                    datatype="string",
                    codelist="RoadStructureAttribute_sectionType",
                ),
            ],
        ),
    ],
    emissions=FeatureEmissions(
        lod1=FeatureEmission(
            collect_all=["./tran:lod1MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod1MultiSurface//gml:Polygon"],
        ),
        lod2=FeatureEmission(
            collect_all=["./tran:*//tran:lod2MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod2MultiSurface//gml:Polygon"],
        ),
        lod3=FeatureEmission(
            collect_all=["./tran:*//tran:lod3MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod3MultiSurface//gml:Polygon"],
        ),
        lod4=FeatureEmission(
            collect_all=["./tran:*//tran:lod4MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod4MultiSurface//gml:Polygon"],
        ),
        semantic_parts=[
            "./tran:trafficArea/tran:TrafficArea",
            "./tran:auxiliaryTrafficArea/tran:AuxiliaryTrafficArea",
        ],
    ),
)

RAILWAY = FeatureProcessingDefinition(
    id="Railway",
    target_elements=["tran:Railway"],
    lod_detection=LODDetection(
        lod1=["./tran:lod1MultiSurface"],
        lod2=["./tran:lod2MultiSurface"],
        lod3=["./tran:lod3MultiSurface"],
        lod4=["./tran:lod4MultiSurface"],
    ),
    property_groups=[
        PropertyGroup(
            base_element=None,
            properties=[
                Property(
                    name="class",
                    path="./tran:class",
                    datatype="string",
                    codelist="TransportationComplex_class",
                ),
                Property(
                    name="function",
                    path="./tran:function",
                    datatype="[]string",
                    codelist="Railway_function",
                ),
            ],
        ),
        # uro:RailwayRouteAttribute
        PropertyGroup(
            base_element="./uro:railwayRouteAttribute/uro:RailwayRouteAttribute",
            properties=[
                Property(
                    name="operatorType",
                    path="./uro:operatorType",
                    datatype="string",
                    codelist="RailwayRouteAttribute_operatorType",
                ),
                Property(
                    name="operator",
                    path="./uro:operator",
                    datatype="string",
                ),
                Property(
                    name="alternativeName",
                    path="./uro:alternativeName",
                    datatype="[]string",
                ),
                Property(
                    name="startStation",
                    path="./uro:startStation",
                    datatype="string",
                ),
                Property(
                    name="endStation",
                    path="./uro:endStation",
                    datatype="string",
                ),
            ],
        ),
    ],
    emissions=FeatureEmissions(
        lod1=FeatureEmission(
            collect_all=["./tran:lod1MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod1MultiSurface//gml:Polygon"],
        ),
        lod2=FeatureEmission(
            collect_all=["./tran:*//tran:lod2MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod2MultiSurface//gml:Polygon"],
        ),
        lod3=FeatureEmission(
            collect_all=["./tran:*//tran:lod3MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod3MultiSurface//gml:Polygon"],
        ),
        lod4=FeatureEmission(
            collect_all=["./tran:*//tran:lod4MultiSurface//gml:Polygon"],
            only_direct=["./tran:lod4MultiSurface//gml:Polygon"],
        ),
        semantic_parts=[
            "./tran:trafficArea/tran:TrafficArea",
            "./tran:auxiliaryTrafficArea/tran:AuxiliaryTrafficArea",
        ],
    ),
)

# TrafficArea, AuxiliaryTrafficArea を扱う
# これらは Road, Railway, Track, Square (いずれもLOD2-4) の子として使われる
TRAFFIC_AREA = FeatureProcessingDefinition(
    id="TrafficArea",
    target_elements=["tran:TrafficArea", "tran:AuxiliaryTrafficArea"],
    property_groups=[
        PropertyGroup(
            base_element=None,
            properties=[
                Property(
                    name="function",
                    path="./tran:function",
                    datatype="[]string",
                    codelist="TrafficArea_function",
                ),
                Property(
                    name="surfaceMaterial",
                    path="./tran:surfaceMaterial",
                    datatype="string",
                    codelist="TrafficArea_surfaceMaterial",
                ),
            ],
        ),
        # uro:TrafficAreaStructureAttribute (Road)
        PropertyGroup(
            base_element="./uro:trafficAreaStructureAttribute/uro:TrafficAreaStructureAttribute",
            properties=[
                Property(
                    name="uro:numberOfLanes",
                    path="./uro:numberOfLanes",
                    datatype="integer",
                ),
            ],
        ),
        # uro:RailwayTrackAttribute (Railway)
        PropertyGroup(
            base_element="./uro:railwayTrackAttribute/uro:RailwayTrackAttribute",
            properties=[
                Property(
                    name="uro:routeName",
                    path="./uro:routeName",
                    datatype="string",
                ),
                Property(
                    name="uro:directionType",
                    path="./uro:directionType",
                    datatype="string",
                    codelist="RailwayTrackAttribute_directionType",
                ),
                Property(
                    name="uro:trackType",
                    path="./uro:trackType",
                    datatype="string",
                    codelist="RailwayTrackAttribute_trackType",
                ),
                Property(
                    name="uro:startPost",
                    path="./uro:startPost",
                    datatype="string",
                ),
                Property(
                    name="uro:endPost",
                    path="./uro:endPost",
                    datatype="string",
                ),
                Property(
                    name="uro:alignmentType",
                    path="./uro:alignmentType",
                    datatype="string",
                    codelist="RailwayTrackAttribute_alignmentType",
                ),
            ],
        ),
    ],
    lod_detection=LODDetection(
        lod2=["./tran:lod2MultiSurface"],
        lod3=["./tran:lod3MultiSurface"],
        lod4=["./tran:lod4MultiSurface"],
    ),
    emissions=FeatureEmissions(
        lod2=FeatureEmission(collect_all=["./tran:lod2MultiSurface//gml:Polygon"]),
        lod3=FeatureEmission(collect_all=["./tran:lod3MultiSurface//gml:Polygon"]),
        lod4=FeatureEmission(collect_all=["./tran:lod4MultiSurface//gml:Polygon"]),
    ),
)
